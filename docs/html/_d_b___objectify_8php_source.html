<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DB Objectify: dbobjectify/models/DB_Objectify.php Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DB Objectify
   </div>
   <div id="projectbrief">Convert DB tables to objects with models and controlers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('_d_b___objectify_8php_source.html','');});
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">DB_Objectify.php</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_d_b___objectify_8php.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;&lt;?php <span class="keywordflow">if</span> (!defined(<span class="stringliteral">&#39;BASEPATH&#39;</span>)) exit(<span class="stringliteral">&#39;No direct script access allowed&#39;</span>);</div><div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="class_d_b___objectify.html">   36</a></span>&#160;<span class="keyword">class </span><a class="code" href="class_d_b___objectify.html">DB_Objectify</a> <span class="keyword">extends</span> CI_Model {</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    </div><div class="line"><a name="l00038"></a><span class="lineno"><a class="line" href="class_d_b___objectify.html#a095c5d389db211932136b53f25f39685">   38</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_d_b___objectify.html#a095c5d389db211932136b53f25f39685">__construct</a>(){</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        <span class="keywordflow">if</span> (!isset($this-&gt;db)){</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;            $this-&gt;load-&gt;database();</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;        }</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        log_message(<span class="stringliteral">&#39;debug&#39;</span>, <span class="stringliteral">&#39;DB Objectify Class Initialized&#39;</span>);</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    }</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    </div><div class="line"><a name="l00053"></a><span class="lineno"><a class="line" href="class_d_b___objectify.html#aca347dc45b285f3f4706b4c271841891">   53</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_d_b___objectify.html#aca347dc45b285f3f4706b4c271841891">generate_objects</a>($all = <span class="keyword">true</span>){</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;         $tables = null;  </div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;         <span class="keywordflow">if</span> ($all === <span class="keyword">true</span>){</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;             $tables = $this-&gt;db-&gt;list_tables();  </div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;             <span class="keywordflow">if</span> ($this-&gt;db-&gt;table_exists($all)) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;               $tables = array($all);  </div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;             }</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;         }  </div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;         <span class="keywordflow">if</span> (isset($tables)) {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;             $this-&gt;config-&gt;load(<span class="stringliteral">&#39;dbobjectify&#39;</span>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;             $outputdir = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_model_dir&#39;</span>);</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;             $object_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_dbobject_prefix&#39;</span>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;             </div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;             <span class="keywordflow">if</span> (!file_exists($outputdir)) {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                mkdir($outputdir, 0777, <span class="keyword">true</span>);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;             }</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;             <span class="keywordflow">if</span> (!file_exists($outputdir.<span class="stringliteral">&#39;/dbobjects&#39;</span>)) {</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                mkdir($outputdir.<span class="stringliteral">&#39;/dbobjects&#39;</span>, 0777, <span class="keyword">true</span>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;             }</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;             <span class="keywordflow">if</span> (!file_exists($outputdir.<span class="stringliteral">&#39;/dbobjects/DBOBase.php&#39;</span>)) {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                 copy($outputdir.<span class="stringliteral">&#39;/dbosupport/DBOBase.php&#39;</span>,$outputdir.<span class="stringliteral">&#39;/dbobjects/DBOBase.php&#39;</span>);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;             }</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;             </div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;             <span class="keywordflow">foreach</span> ( $tables as $table) {</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                $tnameuse = ucwords(strtolower($table),<span class="charliteral">&#39;_&#39;</span>); </div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;                $obectFileName = $object_prefix.$tnameuse ;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                </div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                $fields = $this-&gt;db-&gt;field_data($table);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                </div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                $objectFileContents = $this-&gt;generate_object($table,$obectFileName,$fields);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                 </div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                <span class="comment">//save file</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                file_put_contents($outputdir.<span class="stringliteral">&#39;/dbobjects/&#39;</span>.$obectFileName.<span class="stringliteral">&#39;.php&#39;</span>,$objectFileContents);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;             }</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;         }   </div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    }</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    </div><div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="class_d_b___objectify.html#a5936690031059a42fd16d98829128099">  102</a></span>&#160;    <span class="keyword">public</span> <span class="keyword">function</span> <a class="code" href="class_d_b___objectify.html#a5936690031059a42fd16d98829128099">generate</a>($all = <span class="keyword">true</span>){</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;         </div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;         $tables = null;  </div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;         <span class="keywordflow">if</span> ($all === <span class="keyword">true</span>){</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;             $tables = $this-&gt;db-&gt;list_tables();  </div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;             <span class="keywordflow">if</span> ($this-&gt;db-&gt;table_exists($all)) {</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;               $tables = array($all);  </div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;             }</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         }</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;         </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;         <span class="keywordflow">if</span> (isset($tables)) {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;             $this-&gt;config-&gt;load(<span class="stringliteral">&#39;dbobjectify&#39;</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;             $outputdir = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_model_dir&#39;</span>);</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;             $controller_outputdir = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_controller_dir&#39;</span>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;             $object_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_dbobject_prefix&#39;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;             $model_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_model_prefix&#39;</span>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;             $link_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_link_prefix&#39;</span>);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;             $link_tables = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_link_tables&#39;</span>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;             </div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;             <span class="keywordflow">if</span> (!file_exists($outputdir)) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                mkdir($outputdir, 0777, <span class="keyword">true</span>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;             }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;             <span class="keywordflow">if</span> (!file_exists($outputdir.<span class="stringliteral">&#39;/dbobjects&#39;</span>)) {</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                mkdir($outputdir.<span class="stringliteral">&#39;/dbobjects&#39;</span>, 0777, <span class="keyword">true</span>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;             }</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;             <span class="keywordflow">if</span> (!file_exists($controller_outputdir.<span class="stringliteral">&#39;/dbcontroller&#39;</span>)) {</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                mkdir($controller_outputdir.<span class="stringliteral">&#39;/dbcontroller&#39;</span>, 0777, <span class="keyword">true</span>);</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;             }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;             <span class="keywordflow">if</span> (!file_exists($outputdir.<span class="stringliteral">&#39;/dbobjects/DBOBase.php&#39;</span>)) {</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                 copy($outputdir.<span class="stringliteral">&#39;/dbosupport/DBOBase.php&#39;</span>,$outputdir.<span class="stringliteral">&#39;/dbobjects/DBOBase.php&#39;</span>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;             }</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;             </div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;             <span class="keywordflow">if</span> (!file_exists($controller_outputdir.<span class="stringliteral">&#39;/dbcontroller/DBControllerBase.php&#39;</span>)) {</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                 copy($outputdir.<span class="stringliteral">&#39;/dbosupport/DBControllerBase.php&#39;</span>,$controller_outputdir.<span class="stringliteral">&#39;/dbcontroller/DBControllerBase.php&#39;</span>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;             }</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;             </div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;             <span class="keywordflow">foreach</span> ( $tables as $table) {</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                $tnameuse = ucwords(strtolower($table),<span class="charliteral">&#39;_&#39;</span>); </div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                $obectFileName = $object_prefix.$tnameuse ;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                $modelFileName = $model_prefix.strtolower($table);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                </div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                $fields = $this-&gt;db-&gt;field_data($table);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                </div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                $objectFileContents = $this-&gt;generate_object($table,$obectFileName,$fields);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                $modelFileContents = $this-&gt;generate_model($table,$obectFileName,$modelFileName,$fields);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                 </div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                <span class="comment">//save file</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                file_put_contents($outputdir.<span class="stringliteral">&#39;/dbobjects/&#39;</span>.$obectFileName.<span class="stringliteral">&#39;.php&#39;</span>,$objectFileContents);</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                file_put_contents($outputdir.$modelFileName.<span class="stringliteral">&#39;.php&#39;</span>,$modelFileContents);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;             }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;             </div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;             <span class="keywordflow">if</span> ((isset($link_tables)) &amp;&amp; (is_array($link_tables))) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                 <span class="keywordflow">foreach</span> ($link_tables as $mastertable =&gt; $masterdata){</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                     $linkFileName = $link_prefix.strtolower($mastertable);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                     </div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                     $masterkey = $masterdata[<span class="stringliteral">&#39;key&#39;</span>];</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                     $children = $masterdata[<span class="stringliteral">&#39;children&#39;</span>];</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                     </div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                     $linkFileContents = $this-&gt;generate_link_model($mastertable,$masterkey,$children,$linkFileName);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                     </div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                     file_put_contents($outputdir.$linkFileName.<span class="stringliteral">&#39;.php&#39;</span>,$linkFileContents);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                 }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;             }</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;         }   </div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    }</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    </div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> generate_link_model($mastertable,$masterfield,$children,$linkFileName){</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;        </div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;        $object_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_dbobject_prefix&#39;</span>);</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;        $obectFileNames = null;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;        $childTables = null;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;        <span class="keywordflow">foreach</span> ($children as $childtable =&gt; $childdata) {</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;            $tnameuse = ucwords(strtolower($childtable),<span class="charliteral">&#39;_&#39;</span>); </div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;            $childTables[] = $tnameuse;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            $obectFileName = $object_prefix.$tnameuse ;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;            $obectFileNames[] = $obectFileName;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;            <span class="keywordflow">if</span> ((isset($childdata[<span class="stringliteral">&#39;children&#39;</span>])) &amp;&amp; (is_array($childdata[<span class="stringliteral">&#39;children&#39;</span>]))) {</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                <span class="keywordflow">foreach</span> ($childdata[<span class="stringliteral">&#39;children&#39;</span>] as $subchildtable =&gt; $subchilddata) {</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    $tnameuse = ucwords(strtolower($subchildtable),<span class="charliteral">&#39;_&#39;</span>); </div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    $childTables[] = $tnameuse;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    $obectFileName = $object_prefix.$tnameuse ;</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                    $obectFileNames[] = $obectFileName;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;            }</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;        }</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        $linkData = $this-&gt;get_link_header($mastertable,$obectFileNames,$childTables,$linkFileName);</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        $linkData .= $this-&gt;generate_link_opendata_func($mastertable,$masterfield,$children,$linkFileName,$childTables);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;        $linkData .= $this-&gt;generate_link_find_functions($children);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;        </div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;        $linkData .= <span class="stringliteral">&quot;\r\n}\r\n ?&gt;&quot;</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        <span class="keywordflow">return</span> $linkData;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        </div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    </div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    </div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> generate_link_find_functions($children){</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        $model_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_model_prefix&#39;</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;        $sData =<span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;        <span class="keywordflow">foreach</span> ($children as $childtable =&gt; $childdata) {</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;            $childkey = $childdata[<span class="stringliteral">&#39;child_key&#39;</span>];    </div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;            $childfield = $childdata[<span class="stringliteral">&#39;child_field&#39;</span>];</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;            $child_master_field = $childdata[<span class="stringliteral">&#39;master_field&#39;</span>];</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            $modelFileName = strtolower($model_prefix.$childtable);     </div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;            $sVar = <span class="charliteral">&#39;o&#39;</span>.ucwords(strtolower($childtable),<span class="charliteral">&#39;_&#39;</span>);   </div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            $funcName =  <span class="stringliteral">&#39;Find_&#39;</span>.ucwords(strtolower($childtable),<span class="charliteral">&#39;_&#39;</span>);  </div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            $sData .=    <span class="stringliteral">&quot;\r\n\t\t/**\r\n&quot;</span>.</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="stringliteral">&quot;\t\t*  @brief Helps find the values for in object based on master child configuration for $sVar.\r\n&quot;</span>.</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                <span class="stringliteral">&quot;\t\t*  \r\n&quot;</span>.</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                <span class="stringliteral">&quot;\t\t*  @param [in] \$$childfield The value of $childfield inside $sVar\r\n&quot;</span>.</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                <span class="stringliteral">&quot;\t\t*  @return Object or Array of objects that are linked to \$$childfield\r\n&quot;</span>.</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                <span class="stringliteral">&quot;\t\t*  \r\n&quot;</span>.</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                <span class="stringliteral">&quot;\t\t*  @details Helps find the values for in object based on master child configuration for $sVar\r\n&quot;</span>.</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                <span class="stringliteral">&quot;\t\t*/\r\n&quot;</span>.</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                <span class="stringliteral">&quot;\t\t public function $funcName(\$$childfield){\r\n&quot;</span>.</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                <span class="stringliteral">&quot;\t\t\t \$iCount = count(\$this-&gt;$sVar);\r\n&quot;</span>.</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                <span class="stringliteral">&quot;\t\t\t \$Ans = null;\r\n&quot;</span>.</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                <span class="stringliteral">&quot;\t\t\t if (count(\$iCount) &gt;= 1) {\r\n&quot;</span>.</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                <span class="stringliteral">&quot;\t\t\t\tforeach(\$this-&gt;$sVar as \$listItem){\r\n&quot;</span>.</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                <span class="stringliteral">&quot;\t\t\t\t\t if (\$listItem-&gt;$childfield == \$$childfield) {\r\n&quot;</span>.</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                <span class="stringliteral">&quot;\t\t\t\t\t\t \$Ans[] =  \$listItem;\r\n&quot;</span>.</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                <span class="stringliteral">&quot;\t\t\t\t\t }\r\n&quot;</span>.</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                <span class="stringliteral">&quot;\t\t\t\t}\r\n&quot;</span>.</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                <span class="stringliteral">&quot;\t\t\t}    \r\n&quot;</span>.</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                <span class="stringliteral">&quot;\t\t\t return \$Ans;   \r\n&quot;</span>.</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                <span class="stringliteral">&quot;\t\t}&quot;</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keywordflow">if</span> ((isset($childdata[<span class="stringliteral">&#39;children&#39;</span>])) &amp;&amp; (is_array($childdata[<span class="stringliteral">&#39;children&#39;</span>]))) {</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    $sData .= $this-&gt;generate_link_find_functions($childdata[<span class="stringliteral">&#39;children&#39;</span>]);   </div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;            }</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;        }       </div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="keywordflow">return</span> $sData;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    </div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> generate_lnk_opendata_childloads($children,$model_prefix,$targetObject = <span class="stringliteral">&#39;$oMaster&#39;</span>){</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        $sData = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">foreach</span> ($children as $childtable =&gt; $childdata) {</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            $childkey = $childdata[<span class="stringliteral">&#39;child_key&#39;</span>];    </div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            $childfield = $childdata[<span class="stringliteral">&#39;child_field&#39;</span>];</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            $child_master_field = $childdata[<span class="stringliteral">&#39;master_field&#39;</span>];</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            $modelFileName = strtolower($model_prefix.$childtable);     </div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            $sVar = <span class="charliteral">&#39;o&#39;</span>.ucwords(strtolower($childtable),<span class="charliteral">&#39;_&#39;</span>);   </div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            $sData .= <span class="stringliteral">&quot;\t\t\t\t\t \$this-&gt;load_child_data(\$this-&gt;$modelFileName,&#39;$childkey&#39;,$targetObject-&gt;{$child_master_field},&#39;$childfield&#39;,\$this-&gt;$sVar);\r\n&quot;</span>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <span class="keywordflow">if</span> ((isset($childdata[<span class="stringliteral">&#39;children&#39;</span>])) &amp;&amp; (is_array($childdata[<span class="stringliteral">&#39;children&#39;</span>]))) {</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                $tmptargetObject = <span class="stringliteral">&quot;\$tmpC_&quot;</span>.$sVar;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                $sData .= <span class="stringliteral">&quot;\t\t\t\t\t if (isset(\$this-&gt;$sVar)) { \r\n&quot;</span>.</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                     <span class="stringliteral">&quot;\t\t\t\t\t\t foreach(\$this-&gt;$sVar as $tmptargetObject) { \r\n&quot;</span>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                    $sData .= <span class="stringliteral">&quot;\t\t&quot;</span>.$this-&gt;generate_lnk_opendata_childloads($childdata[<span class="stringliteral">&#39;children&#39;</span>],$model_prefix,$tmptargetObject);     </div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                </div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                $sData .=<span class="stringliteral">&quot;\t\t\t\t\t\t } //end for \r\n&quot;</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                $sData .=<span class="stringliteral">&quot;\t\t\t\t\t } //end if \r\n&quot;</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                    </div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;            }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        }       </div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <span class="keywordflow">return</span> $sData;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    </div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> generate_link_opendata_func($mastertable,$masterfield,$children,$linkFileName,$childTables){</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;        $model_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_model_prefix&#39;</span>);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        $modelFileName = strtolower($model_prefix.$mastertable);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        $sVar = <span class="charliteral">&#39;o&#39;</span>.ucwords(strtolower($mastertable),<span class="charliteral">&#39;_&#39;</span>);  </div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;        </div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        $sData =    <span class="stringliteral">&quot;\r\n\t\t/**\r\n&quot;</span>.</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @brief Creates a child array object for the child data based on the linking to the master table.\r\n&quot;</span>.</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                    <span class="stringliteral">&quot;\t\t*  \r\n&quot;</span>.</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @param [in] \$oChildModelObj Child Model object to be used for retrieving data\r\n&quot;</span>.</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @param [in] \$childkey Child key to be used to retrieve data from child model\r\n&quot;</span>.</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @param [in] \$masterid Master field data used to help retieve chil records\r\n&quot;</span>.</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @param [in] \$childfield Child field to be used to retrieve data from master model   \r\n&quot;</span>.</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @param [in] &amp;\$oChildObject The object that holds the child array\r\n&quot;</span>.</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @return none\r\n&quot;</span>.</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                    <span class="stringliteral">&quot;\t\t*  \r\n&quot;</span>.</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                    <span class="stringliteral">&quot;\t\t*  @details Creates a child array object for the child data based on the linking to the master table. Todo : Allow list of keys to be used.Note currently\r\n&quot;</span>.</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;                    <span class="stringliteral">&quot;\t\t*/\r\n&quot;</span>.</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                    <span class="stringliteral">&quot;\t\t private function load_child_data(\$oChildModelObj,\$childkey,\$masterid,\$childfield,&amp;\$oChildObject){\r\n&quot;</span>.</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;                    <span class="stringliteral">&quot;\t\t\t \$oTmpL = \$oChildModelObj-&gt;select()-&gt;where(\$childfield,\$masterid)-&gt;find_all();\r\n&quot;</span>.</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;                    <span class="stringliteral">&quot;\t\t\t if ((isset(\$oTmpL)) &amp;&amp; (count(\$oTmpL) &gt;= 1)) {\r\n&quot;</span>.</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;                    <span class="stringliteral">&quot;\t\t\t\tforeach(\$oTmpL as \$listItem){\r\n&quot;</span>.</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;                    <span class="stringliteral">&quot;\t\t\t\t\t if (!isset(\$oChildObject[\$listItem-&gt;\$childkey])) {\r\n&quot;</span>.</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;                    <span class="stringliteral">&quot;\t\t\t\t\t\t \$oChildObject[\$listItem-&gt;\$childkey] =  \$listItem;\r\n&quot;</span>.</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;                    <span class="stringliteral">&quot;\t\t\t\t\t }\r\n&quot;</span>.</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;                    <span class="stringliteral">&quot;\t\t\t\t}\r\n&quot;</span>.</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;                    <span class="stringliteral">&quot;\t\t\t}    \r\n&quot;</span>.</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                    <span class="stringliteral">&quot;\t\t}&quot;</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;        </div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;        </div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;        $sData .= <span class="stringliteral">&quot;\r\n\t\t/**\r\n&quot;</span>.</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                 <span class="stringliteral">&quot;\t\t *  @brief Load master table and all child tables based on ID passed\r\n&quot;</span>.</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                 <span class="stringliteral">&quot;\t\t *  \r\n&quot;</span>.</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                 <span class="stringliteral">&quot;\t\t *  @param [in] \$ID value passed that master table is linked on based on masterkey\r\n&quot;</span>.</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                 <span class="stringliteral">&quot;\t\t *  @return None\r\n&quot;</span>.</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                 <span class="stringliteral">&quot;\t\t *  \r\n&quot;</span>.</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;                 <span class="stringliteral">&quot;\t\t *  @details Load master table and all child tables based on ID passed. All objects will be set after load (or cleared if none found). All child tables will be arrays regardless if they are only 1 record or not\r\n&quot;</span>.</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;                 <span class="stringliteral">&quot;\t\t */ \r\n&quot;</span>.</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                <span class="stringliteral">&quot;\t\t public function load_data(\$ID){\r\n&quot;</span>;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;                </div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        <span class="keywordflow">foreach</span> ($childTables as $ctable) {</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            $sVar = <span class="charliteral">&#39;o&#39;</span>.ucwords(strtolower($ctable),<span class="charliteral">&#39;_&#39;</span>);   </div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;            $sData .= <span class="stringliteral">&quot;\t\t\t \$this-&gt;{$sVar} = null; \r\n&quot;</span>;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        }           </div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        $sVar = <span class="charliteral">&#39;o&#39;</span>.ucwords(strtolower($mastertable),<span class="charliteral">&#39;_&#39;</span>);  </div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        $modelFileName = strtolower($model_prefix.$mastertable);        </div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;        </div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;        $sData .= <span class="stringliteral">&quot;\t\t\t \$this-&gt;{$sVar} = \$this-&gt;{$modelFileName}-&gt;select()-&gt;where(&#39;{$masterfield}&#39;,\$ID)-&gt;find_all();\r\n&quot;</span>.</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                 <span class="stringliteral">&quot;\t\t\t if (isset(\$this-&gt;$sVar)) { \r\n&quot;</span>.</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                 <span class="stringliteral">&quot;\t\t\t\t foreach(\$this-&gt;$sVar as \$oMaster) { \r\n&quot;</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                 </div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;        $sData .= $this-&gt;generate_lnk_opendata_childloads($children,$model_prefix);  </div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    </div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        $sData .=<span class="stringliteral">&quot;\t\t\t\t } //end for \r\n&quot;</span>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;        $sVar = <span class="charliteral">&#39;o&#39;</span>.ucwords(strtolower($mastertable),<span class="charliteral">&#39;_&#39;</span>);  </div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        $modelFileName = strtolower($model_prefix.$mastertable);        </div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        </div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        $sData .=<span class="stringliteral">&quot;\t\t\t\t if ( (count(\$this-&gt;$sVar) == 1)) {\r\n&quot;</span>.</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                 <span class="stringliteral">&quot;\t\t\t\t\t \$this-&gt;{$sVar} = \$this-&gt;{$sVar}[0];\r\n&quot;</span>.</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                 <span class="stringliteral">&quot;\t\t\t\t }        \r\n&quot;</span>;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="keywordflow">foreach</span> ($childTables as $ctable) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            $sVar = <span class="charliteral">&#39;o&#39;</span>.ucwords(strtolower($ctable),<span class="charliteral">&#39;_&#39;</span>);   </div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                $sData .=<span class="stringliteral">&quot;\t\t\t\t if ((isset(\$this-&gt;$sVar)) &amp;&amp; (count(\$this-&gt;$sVar) == 1)) {\r\n&quot;</span>.</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                 <span class="stringliteral">&quot;\t\t\t\t\t \$this-&gt;{$sVar} = end(\$this-&gt;{$sVar});\r\n&quot;</span>.</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;                 <span class="stringliteral">&quot;\t\t\t\t }        \r\n&quot;</span>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;        }   </div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        $sData .= <span class="stringliteral">&quot;\t\t\t} \r\n\t\t }&quot;</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">return</span> $sData;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;        <span class="comment">//$sVar = &#39;$o&#39;.ucwords(strtolower($table),&#39;_&#39;);</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;        <span class="comment">//$modelFileName = strtolower($model_prefix.$table);</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;    }</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    </div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> generate_model($table,$obectFileName,$modelFileName,$table_fields_data){</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        $modelData = $this-&gt;get_model_header($table,$obectFileName,$modelFileName);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;                <span class="keywordflow">foreach</span> ($table_fields_data as $field){</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;                    <span class="keywordflow">if</span> ($field-&gt;primary_key) {</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;                      $modelData .= <span class="stringliteral">&quot;\t protected \$primary_key  = &#39;{$field-&gt;name}&#39;;&quot;</span>;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;                    }</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                </div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                <span class="comment">//Body</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                $modelData  .= <span class="stringliteral">&quot;\r\n\t protected \$date_format  = &#39;datetime&#39;;\r\n&quot;</span>.</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$log_user     = FALSE;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$set_created  = TRUE;\r\n&quot;</span>.</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$created_field    = &#39;created_on&#39;;\r\n&quot;</span>.</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$created_by_field = &#39;created_by&#39;;\r\n&quot;</span>.</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$set_modified     = FALSE;\r\n&quot;</span>.</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$modified_field   = &#39;modified_on&#39;;\r\n&quot;</span>.</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$modified_by_field = &#39;modified_by&#39;;\r\n&quot;</span>.</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$soft_deletes = FALSE;\r\n&quot;</span>.</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$deleted_field    = &#39;deleted&#39;;\r\n&quot;</span>.</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$deleted_by_field = &#39;deleted_by&#39;;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$return_type      = &#39;object&#39;;\r\n&quot;</span>.</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$custom_return_object      = &#39;$obectFileName&#39;;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$protected_attributes   = array();\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$validation_rules         = array();\r\n&quot;</span>.</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$insert_validation_rules  = array();\r\n&quot;</span>.</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$skip_validation          = false;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                                        <span class="stringliteral">&quot;\t // Observers / Events\r\n&quot;</span>.</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$before_insert    = array();\r\n&quot;</span>.</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$after_insert     = array();\r\n&quot;</span>.</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$before_update    = array();\r\n&quot;</span>.</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$after_update     = array();\r\n&quot;</span>.</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$before_find      = array();\r\n&quot;</span>.</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$after_find       = array();\r\n&quot;</span>.</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$before_delete    = array();\r\n&quot;</span>.</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;                                        <span class="stringliteral">&quot;\t protected \$after_delete     = array();\r\n&quot;</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;                 <span class="comment">//ending   </span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;                 $modelData  .= $this-&gt;build_model_constructor($table_fields_data,$modelFileName);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;                 $modelData  .= $this-&gt;build_validation_rules($table_fields_data);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                 </div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                 $modelData  .= <span class="stringliteral">&quot;} \r\n ?&gt;&quot;</span>;        </div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                 <span class="keywordflow">return</span> $modelData;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;    }</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="keyword">private</span>  <span class="keyword">function</span> get_general_field_type($dbfieldtype){</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;        <span class="comment">//match all DB types to common types for beter processing when generating form input values and working with replies</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;        <span class="keywordflow">switch</span> ($dbfieldtype) {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;text&quot;</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;char&quot;</span>;</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;varchar&quot;</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;string&quot;</span>   : $fieldtype = <span class="stringliteral">&quot;string&quot;</span>;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;            </div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;tinyint&quot;</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;integer&quot;</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;int&quot;</span>      :  $fieldtype = <span class="stringliteral">&quot;int&quot;</span>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            </div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;decimal&quot;</span>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;float&quot;</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;currency&quot;</span>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;real&quot;</span>     : $fieldtype = <span class="stringliteral">&quot;decimal&quot;</span>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;timestamp&quot;</span>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;datetime&quot;</span> : $fieldtype = <span class="stringliteral">&quot;datetime&quot;</span>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;year&quot;</span>     : $fieldtype = <span class="stringliteral">&quot;year&quot;</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                            </div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;date&quot;</span>     : $fieldtype = <span class="stringliteral">&quot;date&quot;</span>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;                            </div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;time&quot;</span>     : $fieldtype = <span class="stringliteral">&quot;time&quot;</span>;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;                            </div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;blob&quot;</span>     : $fieldtype = <span class="stringliteral">&quot;blob&quot;</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                            </div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;null&quot;</span>     ; </div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;            <span class="keywordflow">case</span> <span class="stringliteral">&quot;unknown&quot;</span>  :  $fieldtype = <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                            </div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            default :</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;                            $fieldtype = <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                           </div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        }       </div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">return</span> $fieldtype;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    }</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    </div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> build_field_def_func($table_fields_data,$table){</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;            $fieldDefFuncData = <span class="stringliteral">&quot;\t\t /** \r\n&quot;</span>.</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                <span class="stringliteral">&quot;\t\t *  @brief Generates a array with field name as key and object as value that represents meta. \r\n&quot;</span>.</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                <span class="stringliteral">&quot;\t\t *  @return Array of field defs \r\n&quot;</span>.</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                <span class="stringliteral">&quot;\t\t *  @details Generates a array with field name as key and object as value that represents meta  _field_def class used as meta is StdClass with name,type,max_length and primary_key fields\r\n&quot;</span>.</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                <span class="stringliteral">&quot;\t\t */ \r\n&quot;</span>.</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                <span class="stringliteral">&quot;\t\t public function get_fields_def(){\r\n&quot;</span>.</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                <span class="stringliteral">&quot;\t\t\t \$fldDefArr = null; \r\n&quot;</span>;   </div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                $pkField = <span class="stringliteral">&quot;&quot;</span>; </div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                <span class="keywordflow">foreach</span> ($table_fields_data as $field){</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;                    $pk = <span class="charliteral">&#39;N&#39;</span>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    <span class="keywordflow">if</span> ($field-&gt;primary_key) {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                        $pk = <span class="charliteral">&#39;Y&#39;</span>;  </div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;                        $pkField = $field-&gt;name;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;                    }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;                    $fieldtype = $this-&gt;get_general_field_type($field-&gt;type);</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;                    $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t\t \$fieldObj = new stdClass(); \r\n&quot;</span>;</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                    $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t\t \$fieldObj-&gt;name = &#39;{$field-&gt;name}&#39;; \r\n&quot;</span>;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t\t \$fieldObj-&gt;type = &#39;$fieldtype&#39;; \r\n&quot;</span>;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t\t \$fieldObj-&gt;max_length = &#39;{$field-&gt;max_length}&#39;; \r\n&quot;</span>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                    $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t\t \$fieldObj-&gt;primary_key = &#39;$pk&#39;; \r\n&quot;</span>;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                    $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t\t \$fldDefArr[&#39;{$field-&gt;name}&#39;] = \$fieldObj; \r\n \r\n&quot;</span>;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                }</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t\t return \$fldDefArr ;   \r\n \t\t}\r\n&quot;</span>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;                $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t /** \r\n&quot;</span>.</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                <span class="stringliteral">&quot;\t\t *  @brief Returns the primary key name for this object. \r\n&quot;</span>.</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                <span class="stringliteral">&quot;\t\t *  @return String that is the primary key for the db objects \r\n&quot;</span>.</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                <span class="stringliteral">&quot;\t\t *  @details Returns the primary key name for this object.\r\n&quot;</span>.</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                <span class="stringliteral">&quot;\t\t */ \r\n&quot;</span>.</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                <span class="stringliteral">&quot;\t\t public function get_primary_key(){\r\n&quot;</span>.</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;                <span class="stringliteral">&quot;\t\t\t return &#39;$pkField&#39;;  \r\n \t\t } \r\n&quot;</span>;   </div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;                $fieldDefFuncData .= <span class="stringliteral">&quot;\t\t /** \r\n&quot;</span>.</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                <span class="stringliteral">&quot;\t\t *  @brief Returns the table name for this object. \r\n&quot;</span>.</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                <span class="stringliteral">&quot;\t\t *  @return String that is the table name for the db objects \r\n&quot;</span>.</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                <span class="stringliteral">&quot;\t\t *  @details Returns the table name for this object.\r\n&quot;</span>.</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;                <span class="stringliteral">&quot;\t\t */ \r\n&quot;</span>.</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                <span class="stringliteral">&quot;\t\t public function get_tablename(){\r\n&quot;</span>.</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                <span class="stringliteral">&quot;\t\t\t return &#39;$table&#39;;    \r\n \t\t } \r\n&quot;</span>;                  </div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                <span class="keywordflow">return</span> $fieldDefFuncData;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;    }</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;    </div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> build_validation_rules($table_fields_data){</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            $fieldValRules = <span class="stringliteral">&quot;\t\t /** \r\n&quot;</span>.</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                <span class="stringliteral">&quot;\t\t *  @brief Generates a array used for the validation rules \r\n&quot;</span>.</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                <span class="stringliteral">&quot;\t\t *  @return Array of validatin rules \r\n&quot;</span>.</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                <span class="stringliteral">&quot;\t\t *  @details Generates a array used for the validation rules\r\n&quot;</span>.</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                <span class="stringliteral">&quot;\t\t */ \r\n&quot;</span>.</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                <span class="stringliteral">&quot;\t\t private function build_validation_rules(){\r\n&quot;</span>.</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                <span class="stringliteral">&quot;\t\t\t \$fldValArr = null; \r\n&quot;</span>;   </div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                 $this-&gt;config-&gt;load(<span class="stringliteral">&#39;dbobjectify&#39;</span>);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;                 $createvalidationrules = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_create_valiation_rules&#39;</span>);</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                <span class="keywordflow">if</span> ($createvalidationrules == <span class="keyword">true</span>) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                    <span class="keywordflow">foreach</span> ($table_fields_data as $field){</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                        $ruleS = array();</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                        <span class="keywordflow">switch</span> ($field-&gt;type) {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;char&quot;</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;varchar&quot;</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;string&quot;</span> : $ruleS[] = <span class="stringliteral">&#39;alpha_numeric_spaces&#39;</span>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                                            $ruleS[] = <span class="stringliteral">&#39;trim&#39;</span>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                                            $ruleS[] = <span class="stringliteral">&#39;max_length[&#39;</span>.$field-&gt;max_length.<span class="charliteral">&#39;]&#39;</span>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;                            </div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;tinyint&quot;</span>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;int&quot;</span> :  $ruleS[] = <span class="stringliteral">&#39;integer&#39;</span>; </div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                            </div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;decimal&quot;</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;real&quot;</span> : $ruleS[] = <span class="stringliteral">&#39;decimal&#39;</span>; </div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;timestamp&quot;</span> : </div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;year&quot;</span> : </div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;date&quot;</span> : </div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;time&quot;</span> : </div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;datetime&quot;</span> : </div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;blob&quot;</span> : </div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;null&quot;</span> : </div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                                           </div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                            <span class="keywordflow">case</span> <span class="stringliteral">&quot;unknown&quot;</span> : </div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;                                           </div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;                        }</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                        <span class="keywordflow">if</span> ($field-&gt;primary_key) {</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                               $ruleS[] = <span class="stringliteral">&#39;|required&#39;</span>;  </div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;                        }</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                        <span class="keywordflow">if</span> (count($ruleS) &gt;= 1) {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                            $ruleS = implode(<span class="charliteral">&#39;|&#39;</span>,$ruleS);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                            $camelCase = ucwords($field-&gt;name);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                            $fieldValRules .= <span class="stringliteral">&quot;\t\t\t \$valEntry = null;\r\n&quot;</span>;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                            $fieldValRules .= <span class="stringliteral">&quot;\t\t\t \$valEntry[&#39;field&#39;] = &#39;{$field-&gt;name}&#39; ; \r\n&quot;</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                            $fieldValRules .= <span class="stringliteral">&quot;\t\t\t \$valEntry[&#39;label&#39;] = &#39;$camelCase&#39;; \r\n&quot;</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;                            $fieldValRules .= <span class="stringliteral">&quot;\t\t\t \$valEntry[&#39;rules&#39;] = &#39;$ruleS&#39; ; \r\n&quot;</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;                            $fieldValRules .= <span class="stringliteral">&quot;\t\t\t \$fldValArr[] = \$valEntry; \r\n&quot;</span>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;                        }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;                    }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;                    $fieldValRules .= <span class="stringliteral">&quot;\t\t\t return \$fldValArr ;  \r\n \t\t}\r\n&quot;</span>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;                } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;                   $fieldValRules .= <span class="stringliteral">&quot;\t\t\t return array() ;   \r\n \t\t}\r\n&quot;</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;                }                   </div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                $fieldValRules .= <span class="stringliteral">&quot;\t\t /** \r\n&quot;</span>.</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;                <span class="stringliteral">&quot;\t\t *  @brief Returns the internal validation rules array \r\n&quot;</span>.</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                <span class="stringliteral">&quot;\t\t *  @return Array of validatin rules \r\n&quot;</span>.</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;                <span class="stringliteral">&quot;\t\t *  @details Returns the internal validation rules array\r\n&quot;</span>.</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;                <span class="stringliteral">&quot;\t\t */ \r\n&quot;</span>.</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;                <span class="stringliteral">&quot;\t\t public function get_validation_rules(){\r\n&quot;</span>.</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;                <span class="stringliteral">&quot;\t\t\t return  \$this-&gt;validation_rules;   \r\n \t\t}\r\n&quot;</span>;     </div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;                <span class="keywordflow">return</span> $fieldValRules;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    }</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    </div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> build_model_constructor($table_fields_data,$modelFileName){</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            $constructorData = <span class="stringliteral">&quot;\t\t /** \r\n&quot;</span>.</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;                <span class="stringliteral">&quot;\t\t *  @brief constructor for model call. \r\n&quot;</span>.</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                <span class="stringliteral">&quot;\t\t *  @return None \r\n&quot;</span>.</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                <span class="stringliteral">&quot;\t\t *  @details Constructor for model class.\r\n&quot;</span>.</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;                <span class="stringliteral">&quot;\t\t */ \r\n&quot;</span>.</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;                <span class="stringliteral">&quot;\t\t  public function __construct(&amp;\$write_db=null, &amp;\$read_db=null){\r\n&quot;</span>.</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;                <span class="stringliteral">&quot;\t\t\t  parent::__construct(\$write_db,\$read_db);\r\n&quot;</span>.</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;                <span class="stringliteral">&quot;\t\t\t  \$this-&gt;validation_rules = \$this-&gt;build_validation_rules();\r\n&quot;</span>.</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;                <span class="stringliteral">&quot;\t\t\t  log_message(&#39;debug&#39;, &#39;$modelFileName Class Initialized&#39;);\r\n&quot;</span>.</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                <span class="stringliteral">&quot;\t\t  }\r\n\r\n&quot;</span>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;                <span class="keywordflow">return</span> $constructorData;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        </div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> generate_object($table,$obectFileName,$table_fields_data){</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        $objectData = $this-&gt;get_object_header($table,$obectFileName);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;        <span class="keywordflow">foreach</span> ($table_fields_data as $field){</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;            $primarykeys = <span class="stringliteral">&#39;&#39;</span>; </div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;            <span class="keywordflow">if</span> ($field-&gt;primary_key) {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;              $primarykeys = <span class="stringliteral">&#39; primary key&#39;</span>; </div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;            }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;            $objectData .= <span class="stringliteral">&quot;\t public \${$field-&gt;name}; \t\t\t /**Type : {$field-&gt;type} , Length : {$field-&gt;max_length} $primarykeys*/ \r\n&quot;</span>;       </div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;        }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;        $objectData  .= $this-&gt;build_field_def_func($table_fields_data,$table);     </div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;        $objectData .= <span class="stringliteral">&quot;} \r\n?&gt;&quot;</span>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        <span class="keywordflow">return</span> $objectData;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    }</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    </div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> get_object_header($table,$obectFileName){</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;        $dateinfiles = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_date_in_file&#39;</span>);</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;        $filedate = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;        <span class="keywordflow">if</span> ($dateinfiles == <span class="keyword">true</span>) {</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;            $filedate = <span class="stringliteral">&#39;Date : &#39;</span>.date (<span class="stringliteral">&quot;Y-m-d&quot;</span>);</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;        }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;&lt;?php if (!defined(&#39;BASEPATH&#39;)) exit(&#39;No direct script access allowed&#39;); \r\n &quot;</span>.</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;                <span class="stringliteral">&quot;/**\r\n $obectFileName \r\n&quot;</span>.</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;                <span class="stringliteral">&quot;Object class to represent the $table table. \r\n &quot;</span>.</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;                <span class="stringliteral">&quot;$filedate\r\n &quot;</span>.</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;                <span class="stringliteral">&quot;Target table : $table\r\n&quot;</span>.</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;                $this-&gt;get_file_copyauth_info().</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;                <span class="stringliteral">&quot;*/ &quot;</span>.</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;                <span class="stringliteral">&quot;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;                <span class="stringliteral">&quot;include_once &#39;DBOBase.php&#39;; &quot;</span>.</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;                <span class="stringliteral">&quot;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;                <span class="stringliteral">&quot;class $obectFileName extends DBOBase { \r\n &quot;</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> get_model_header($table,$obectFileName,$modelFileName){</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;        $dateinfiles = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_date_in_file&#39;</span>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        $filedate = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="keywordflow">if</span> ($dateinfiles == <span class="keyword">true</span>) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;            $filedate = <span class="stringliteral">&#39;Date : &#39;</span>.date (<span class="stringliteral">&quot;Y-m-d&quot;</span>);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <span class="keywordflow">return</span>  <span class="stringliteral">&quot;&lt;?php if (!defined(&#39;BASEPATH&#39;)) exit(&#39;No direct script access allowed&#39;);\r\n &quot;</span>.</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                <span class="stringliteral">&quot;/**\r\n $modelFileName \r\n&quot;</span>.</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                <span class="stringliteral">&quot;Model class to represent the $table table. \r\n &quot;</span>.</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;                <span class="stringliteral">&quot;$filedate\r\n &quot;</span>.</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;                <span class="stringliteral">&quot;Target table : $table\r\n&quot;</span>.</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                $this-&gt;get_file_copyauth_info().</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                <span class="stringliteral">&quot;*/ &quot;</span>.</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                <span class="stringliteral">&quot;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;                <span class="stringliteral">&quot;include_once &#39;MY_Model.php&#39;; &quot;</span>.</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                <span class="stringliteral">&quot;\r\n&quot;</span>.</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                <span class="stringliteral">&quot;include_once &#39;dbobjects/$obectFileName.php&#39;; &quot;</span>.</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                <span class="stringliteral">&quot;\r\n\r\n&quot;</span>.</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                <span class="stringliteral">&quot;class $modelFileName  extends MY_Model { &quot;</span>.</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                <span class="stringliteral">&quot;\r\n\r\n\t protected \$table_name   = &#39;$table&#39;; \r\n&quot;</span>;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    }</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    </div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> get_link_header($table,$obectFileNames,$childTables,$linkFileName){</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        $dateinfiles = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_date_in_file&#39;</span>);</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        $model_prefix = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_model_prefix&#39;</span>);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;        $filedate = <span class="stringliteral">&#39;&#39;</span>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        <span class="keywordflow">if</span> ($dateinfiles == <span class="keyword">true</span>) {</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;            $filedate = <span class="stringliteral">&#39;Date : &#39;</span>.date (<span class="stringliteral">&quot;Y-m-d&quot;</span>);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;        }</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;        $sData =    <span class="stringliteral">&quot;&lt;?php if (!defined(&#39;BASEPATH&#39;)) exit(&#39;No direct script access allowed&#39;);\r\n &quot;</span>.</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                <span class="stringliteral">&quot;/**\r\n $linkFileName \r\n&quot;</span>.</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                <span class="stringliteral">&quot;Model class to represent the $table table. \r\n &quot;</span>.</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;                <span class="stringliteral">&quot;$filedate\r\n &quot;</span>.</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;                <span class="stringliteral">&quot;Target table : $table\r\n&quot;</span>.</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;                $this-&gt;get_file_copyauth_info().</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;                <span class="stringliteral">&quot;*/ &quot;</span>.</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;                <span class="stringliteral">&quot;\r\n\r\n&quot;</span>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;        $sVar = <span class="stringliteral">&#39;$o&#39;</span>.ucwords(strtolower($table),<span class="charliteral">&#39;_&#39;</span>);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;        $sData .= <span class="stringliteral">&quot;\r\n&quot;</span>.</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;                <span class="stringliteral">&quot;class $linkFileName  extends CI_Model { \r\n&quot;</span>.</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;                <span class="stringliteral">&quot;\t\t public $sVar; /**Master table*/\r\n&quot;</span>.</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;                <span class="stringliteral">&quot;\r\n\r\n&quot;</span>;</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;        <span class="keywordflow">foreach</span> ($childTables as $childname){</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;             $sVar = <span class="stringliteral">&#39;$o&#39;</span>.$childname;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;             $sData .= <span class="stringliteral">&quot;\t\t public $sVar;\r\n&quot;</span>;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        }           </div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        $sData .= <span class="stringliteral">&quot;\r\n\t\t/** \r\n&quot;</span>. </div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;                 <span class="stringliteral">&quot;\t\t*  @brief constructor for model call. \r\n&quot;</span>. </div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;                 <span class="stringliteral">&quot;\t\t*  @return None \r\n&quot;</span>. </div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;                 <span class="stringliteral">&quot;\t\t*  @details Constructor for model class.\r\n&quot;</span>. </div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;                 <span class="stringliteral">&quot;\t\t*/ \r\n&quot;</span>. </div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;                <span class="stringliteral">&quot;\t\t public function __construct(){\r\n&quot;</span>.</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;                <span class="stringliteral">&quot;\t\t\t if (!isset(\$this-&gt;db)){\r\n&quot;</span>.</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;                <span class="stringliteral">&quot;\t\t\t\t   \$this-&gt;load-&gt;database();\r\n&quot;</span>.</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;                <span class="stringliteral">&quot;\t\t\t }\r\n&quot;</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;                $modelFileName = strtolower($model_prefix.$table);</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;                $sData .= <span class="stringliteral">&quot;\t\t\t \$this-&gt;load-&gt;model(&#39;$modelFileName&#39;);\r\n&quot;</span>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;                <span class="keywordflow">foreach</span> ($childTables as $childname){</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;                    $modelFileName = strtolower($model_prefix.$childname);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;                    $sData .= <span class="stringliteral">&quot;\t\t\t \$this-&gt;load-&gt;model(&#39;$modelFileName&#39;);\r\n&quot;</span>;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;                }</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;                $sData .= <span class="stringliteral">&quot;\t\t\t log_message(&#39;debug&#39;, &#39;$linkFileName Class Initialized&#39;);\r\n&quot;</span>.</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;                          <span class="stringliteral">&quot;\t\t }\r\n&quot;</span>;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;        <span class="keywordflow">return</span> $sData;      </div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;    }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;    </div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;    <span class="keyword">private</span> <span class="keyword">function</span> get_file_copyauth_info(){</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;             $this-&gt;config-&gt;load(<span class="stringliteral">&#39;dbobjectify&#39;</span>);</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;             $auth = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_author&#39;</span>);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;             $copyright = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_copyright&#39;</span>);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;             $license = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_license&#39;</span>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;             $link = $this-&gt;config-&gt;item(<span class="stringliteral">&#39;dbobj_link&#39;</span>);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="keywordflow">return</span> <span class="stringliteral">&quot;@author $auth \r\n&quot;</span>.</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;                <span class="stringliteral">&quot;@copyright Copyright (c) &quot;</span>.date(<span class="charliteral">&#39;Y&#39;</span>).<span class="stringliteral">&quot; $copyright\r\n&quot;</span>.</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;                <span class="stringliteral">&quot;@license $license\r\n&quot;</span>.</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;                <span class="stringliteral">&quot;@link  $link\r\n&quot;</span>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;                </div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;    }</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div><div class="ttc" id="class_d_b___objectify_html"><div class="ttname"><a href="class_d_b___objectify.html">DB_Objectify</a></div><div class="ttdef"><b>Definition:</b> <a href="_d_b___objectify_8php_source.html#l00036">DB_Objectify.php:36</a></div></div>
<div class="ttc" id="class_d_b___objectify_html_a095c5d389db211932136b53f25f39685"><div class="ttname"><a href="class_d_b___objectify.html#a095c5d389db211932136b53f25f39685">DB_Objectify\__construct</a></div><div class="ttdeci">__construct()</div><div class="ttdef"><b>Definition:</b> <a href="_d_b___objectify_8php_source.html#l00038">DB_Objectify.php:38</a></div></div>
<div class="ttc" id="class_d_b___objectify_html_a5936690031059a42fd16d98829128099"><div class="ttname"><a href="class_d_b___objectify.html#a5936690031059a42fd16d98829128099">DB_Objectify\generate</a></div><div class="ttdeci">generate($all=true)</div><div class="ttdoc">Generate object and model for specific table name or all. </div><div class="ttdef"><b>Definition:</b> <a href="_d_b___objectify_8php_source.html#l00102">DB_Objectify.php:102</a></div></div>
<div class="ttc" id="class_d_b___objectify_html_aca347dc45b285f3f4706b4c271841891"><div class="ttname"><a href="class_d_b___objectify.html#aca347dc45b285f3f4706b4c271841891">DB_Objectify\generate_objects</a></div><div class="ttdeci">generate_objects($all=true)</div><div class="ttdoc">Generate only objects for given table list. </div><div class="ttdef"><b>Definition:</b> <a href="_d_b___objectify_8php_source.html#l00053">DB_Objectify.php:53</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_23a892c2a5a3c516fab122df43da5a22.html">dbobjectify</a></li><li class="navelem"><a class="el" href="dir_8908ada28035ad685e903202bebc1be3.html">models</a></li><li class="navelem"><a class="el" href="_d_b___objectify_8php.html">DB_Objectify.php</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
